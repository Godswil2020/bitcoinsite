
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Profit Bit Investment</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #2d2d2d 100%);
    color: #ffffff;
    min-height: 100vh;
}

.container {
    display: flex;
    min-height: 100vh;
}

/* Sidebar Styles */
.sidebar {
    width: 280px;
    background: linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%);
    border-right: 1px solid #333;
    transition: all 0.3s ease;
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    overflow-y: auto;
    z-index: 1000;
}

.sidebar.collapsed {
    width: 80px;
}

.sidebar-header {
    padding: 20px;
    border-bottom: 1px solid #333;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
}

.logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

.logo-img {
    width: 60px;
    height: auto;
    transition: all 0.3s ease;
}

.sidebar.collapsed .logo-img {
    width: 40px;
}

.logo-text {
    font-size: 22px;
    font-weight: bold;
    color: #FF8C00;
    transition: opacity 0.3s ease;
    white-space: nowrap;
}

.sidebar.collapsed .logo-text {
    opacity: 0;
    width: 0;
    overflow: hidden;
}

.sidebar-toggle {
    background: none;
    border: 2px solid #FF8C00;
    color: #FF8C00;
    font-size: 20px;
    cursor: pointer;
    padding: 8px 12px;
    border-radius: 8px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 44px;
    min-height: 44px;
}

.sidebar-toggle:hover {
    background-color: rgba(255, 140, 0, 0.1);
    transform: scale(1.05);
}

.sidebar-menu {
    list-style: none;
    padding: 20px 0;
}

.sidebar-menu li {
    margin-bottom: 5px;
}

.menu-item {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    color: #cccccc;
    text-decoration: none;
    transition: all 0.3s ease;
    position: relative;
}

.menu-item:hover {
    background-color: rgba(255, 140, 0, 0.1);
    color: #FF8C00;
}

.menu-item.active {
    background-color: rgba(255, 140, 0, 0.2);
    color: #FF8C00;
    border-right: 3px solid #FF8C00;
}

.menu-item .icon {
    width: 20px;
    margin-right: 15px;
    text-align: center;
}

.sidebar.collapsed .menu-item .text {
    opacity: 0;
    width: 0;
    overflow: hidden;
}

/* Main Content */
.main-content {
    flex: 1;
    margin-left: 280px;
    padding: 0;
    overflow-x: hidden;
    transition: margin-left 0.3s ease;
}

.sidebar.collapsed + .main-content {
    margin-left: 80px;
}

.header {
    background: rgba(26, 26, 26, 0.9);
    padding: 20px 30px;
    border-bottom: 1px solid #333;
    display: flex;
    justify-content: space-between;
    align-items: center;
    backdrop-filter: blur(10px);
    position: sticky;
    top: 0;
    z-index: 100;
}

.header h1 {
    color: #FF8C00;
    font-size: 28px;
    font-weight: 600;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 15px;
}

.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(45deg, #FF8C00, #FFA500);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
}

/* Dashboard Content */
.dashboard-content {
    padding: 30px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.stat-card {
    background: linear-gradient(135deg, rgba(255, 140, 0, 0.1) 0%, rgba(26, 26, 26, 0.8) 100%);
    border: 1px solid rgba(255, 140, 0, 0.3);
    border-radius: 12px;
    padding: 25px;
    display: flex;
    align-items: center;
    gap: 20px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.stat-card:hover {
    transform: translateY(-5px);
    border-color: #FF8C00;
    box-shadow: 0 10px 30px rgba(255, 140, 0, 0.2);
}

.stat-icon {
    font-size: 30px;
    width: 60px;
    height: 60px;
    border-radius: 12px;
    background: linear-gradient(45deg, #FF8C00, #FFA500);
    display: flex;
    align-items: center;
    justify-content: center;
}

.stat-details h3 {
    color: #cccccc;
    font-size: 14px;
    margin-bottom: 8px;
    font-weight: 500;
}

.stat-value {
    font-size: 24px;
    font-weight: bold;
    color: #ffffff;
    margin-bottom: 5px;
}

.stat-change {
    font-size: 12px;
    padding: 2px 8px;
    border-radius: 4px;
    background-color: rgba(255, 255, 255, 0.1);
}

.stat-change.positive {
    color: #4CAF50;
    background-color: rgba(76, 175, 80, 0.1);
}

/* Activity Section */
.activity-section {
    background: rgba(26, 26, 26, 0.6);
    border-radius: 12px;
    padding: 30px;
    border: 1px solid rgba(255, 140, 0, 0.2);
}

.activity-section h2 {
    color: #FF8C00;
    margin-bottom: 25px;
    font-size: 22px;
}

.activity-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
}

.activity-item:hover {
    background: rgba(255, 140, 0, 0.05);
    border-color: rgba(255, 140, 0, 0.3);
}

.activity-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
}

.activity-icon.deposit {
    background: linear-gradient(45deg, #4CAF50, #66BB6A);
}

.activity-icon.referral {
    background: linear-gradient(45deg, #2196F3, #42A5F5);
}

.activity-icon.withdrawal {
    background: linear-gradient(45deg, #FF9800, #FFB74D);
}

.activity-details {
    flex: 1;
}

.activity-details h4 {
    color: #ffffff;
    margin-bottom: 5px;
    font-size: 16px;
}

.activity-details p {
    color: #cccccc;
    font-size: 14px;
    margin-bottom: 3px;
}

.activity-time {
    color: #999999;
    font-size: 12px;
}

.activity-status {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 500;
}

.activity-status.success {
    background-color: rgba(76, 175, 80, 0.2);
    color: #4CAF50;
}

.activity-status.pending {
    background-color: rgba(255, 152, 0, 0.2);
    color: #FF9800;
}

/* Responsive Design */
@media (max-width: 768px) {
    .sidebar {
        position: fixed;
        left: -280px;
        height: 100vh;
        z-index: 1001;
    }

    .sidebar.active {
        left: 0;
    }

    .main-content {
        margin-left: 0;
    }

    .sidebar.collapsed + .main-content {
        margin-left: 0;
    }

    .stats-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .header {
        padding: 15px 20px;
    }

    .dashboard-content {
        padding: 20px;
    }

    .activity-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    .logo-img {
        width: 45px;
    }

    .sidebar.collapsed .logo-img {
        width: 35px;
    }
}

@media (max-width: 480px) {
    .stat-card {
        padding: 20px;
    }

    .stat-value {
        font-size: 20px;
    }

    .header h1 {
        font-size: 24px;
    }
}

        .admin-header {
            background: rgba(26, 26, 26, 0.9);
            padding: 20px 30px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .admin-content {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            min-height: calc(100vh - 80px);
        }

        .users-section {
            background: rgba(26, 26, 26, 0.6);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(255, 140, 0, 0.2);
        }

        .user-details-section {
            background: rgba(26, 26, 26, 0.6);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(255, 140, 0, 0.2);
            position: sticky;
            top: 110px;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 8px;
            color: #ffffff;
            font-size: 16px;
            margin-bottom: 25px;
        }

        .search-box::placeholder {
            color: #999;
        }

        .search-box:focus {
            outline: none;
            border-color: #FF8C00;
            box-shadow: 0 0 10px rgba(255, 140, 0, 0.3);
        }

        .users-grid {
            display: grid;
            gap: 15px;
        }

        .user-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-card:hover {
            background: rgba(255, 140, 0, 0.05);
            border-color: rgba(255, 140, 0, 0.3);
            transform: translateY(-2px);
        }

        .user-card.selected {
            background: rgba(255, 140, 0, 0.1);
            border-color: #FF8C00;
        }

        .user-info h4 {
            color: #ffffff;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .user-info p {
            color: #cccccc;
            font-size: 14px;
            margin-bottom: 3px;
        }

        .user-status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-confirmed {
            background-color: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }

        .status-pending {
            background-color: rgba(255, 152, 0, 0.2);
            color: #FF9800;
        }

        .detail-group {
            margin-bottom: 25px;
        }

        .detail-group h3 {
            color: #FF8C00;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .detail-field {
            margin-bottom: 15px;
        }

        .detail-field label {
            display: block;
            color: #cccccc;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .detail-input {
            width: 100%;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 6px;
            color: #ffffff;
            font-size: 14px;
        }

        .detail-input:focus {
            outline: none;
            border-color: #FF8C00;
            box-shadow: 0 0 8px rgba(255, 140, 0, 0.3);
        }

        .detail-select {
            width: 100%;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 6px;
            color: #ffffff;
            font-size: 14px;
        }

        .detail-select option {
            background: #1a1a1a;
            color: #ffffff;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, #FF8C00, #FFA500);
            color: #ffffff;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 140, 0, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn-chat {
            background: linear-gradient(45deg, #2196F3, #42A5F5);
            color: #ffffff;
            grid-column: 1 / -1;
            margin-top: 10px;
        }

        .btn-chat:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .create-admin-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 140, 0, 0.2);
        }

        .create-admin-section h3 {
            color: #FF8C00;
            margin-bottom: 20px;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
            border-radius: 12px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 140, 0, 0.3);
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 140, 0, 0.2);
        }

        .chat-header h3 {
            color: #FF8C00;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            max-width: 80%;
        }

        .message.admin {
            background: linear-gradient(45deg, #FF8C00, #FFA500);
            color: #ffffff;
            margin-left: auto;
            text-align: right;
        }

        .message.user {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .message-input {
            display: flex;
            gap: 10px;
        }

        .message-input input {
            flex: 1;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 6px;
            color: #ffffff;
        }

        .message-input button {
            padding: 10px 20px;
            background: linear-gradient(45deg, #FF8C00, #FFA500);
            border: none;
            border-radius: 6px;
            color: #ffffff;
            cursor: pointer;
        }

        @media (max-width: 1024px) {
            .admin-content {
                grid-template-columns: 1fr;
            }

            .user-details-section {
                position: relative;
                top: auto;
                max-height: none;
            }
        }

        @media (max-width: 768px) {
            .admin-content {
                padding: 20px;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
       
        <!-- Main Content -->
        <main class="main-content">
            <header class="admin-header">
                <h1>Admin Dashboard</h1>
                <div class="user-info">
                    <span>Admin Panel</span>
                    <div class="user-avatar">AD</div>
                </div>
            </header>

            <div class="admin-content">
                <!-- Users Section -->
                <div class="users-section">
                    <h2 style="color: #FF8C00; margin-bottom: 25px; font-size: 22px;">User Management</h2>
                    
                    <input type="text" class="search-box" id="searchUsers" placeholder="Search users by name or email...">
                    
                    <div class="users-grid" id="usersGrid">
                        <!-- Users will be loaded here -->
                    </div>

                    <!-- Create Admin Section -->
                    <div class="create-admin-section">
                        <h3>Create New Admin</h3>
                        <div class="detail-field">
                            <label>Email</label>
                            <input type="email" class="detail-input" id="newAdminEmail" placeholder="Enter admin email">
                        </div>
                        <div class="detail-field">
                            <label>Password</label>
                            <input type="password" class="detail-input" id="newAdminPassword" placeholder="Enter admin password">
                        </div>
                        <button class="btn btn-primary" onclick="createAdmin()">Create Admin</button>
                    </div>
                </div>

                <!-- User Details Section -->
                <div class="user-details-section">
                    <div id="noUserSelected" style="text-align: center; color: #999; padding: 50px 0;">
                        <h3>Select a user to view details</h3>
                        <p>Choose a user from the list to manage their account</p>
                    </div>

                    <div id="userDetailsContent" style="display: none;">
                        <h2 style="color: #FF8C00; margin-bottom: 25px; font-size: 20px;">User Details</h2>
                        
                        <div class="detail-group">
                            <h3>Personal Information</h3>
                            <div class="detail-field">
                                <label>Full Name</label>
                                <input type="text" class="detail-input" id="userName" readonly>
                            </div>
                            <div class="detail-field">
                                <label>Email</label>
                                <input type="email" class="detail-input" id="userEmail" readonly>
                            </div>
                            <div class="detail-field">
                                <label>Join Date</label>
                                <input type="text" class="detail-input" id="userJoinDate" readonly>
                            </div>
                        </div>

                        <div class="detail-group">
                            <h3>Account Settings</h3>
                            <div class="detail-field">
                                <label>Account Status</label>
                                <select class="detail-select" id="userStatus">
                                    <option value="pending">Pending</option>
                                    <option value="confirmed">Confirmed</option>
                                </select>
                            </div>
                            <div class="detail-field">
                                <label>Account Type</label>
                                <select class="detail-select" id="userAccountType">
                                    <option value="none">None</option>
                                    <option value="bronze">Bronze</option>
                                    <option value="silver">Silver</option>
                                    <option value="gold">Gold</option>
                                    <option value="platinum">Platinum</option>
                                </select>
                            </div>
                        </div>

                        <div class="detail-group">
                            <h3>Financial Information</h3>
                            <div class="detail-field">
                                <label>Wallet Balance ($)</label>
                                <input type="number" class="detail-input" id="userWalletBalance" step="0.01">
                            </div>
                            <div class="detail-field">
                                <label>Invested Amount ($)</label>
                                <input type="number" class="detail-input" id="userInvested" step="0.01">
                            </div>
                            <div class="detail-field">
                                <label>Total Withdrawal ($)</label>
                                <input type="number" class="detail-input" id="userWithdrawal" step="0.01">
                            </div>
                            <div class="detail-field">
                                <label>Referral Bonus ($)</label>
                                <input type="number" class="detail-input" id="userReferralBonus" step="0.01">
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="saveUserChanges()">Save Changes</button>
                            <button class="btn btn-secondary" onclick="resetUserForm()">Reset</button>
                            <button class="btn btn-chat" onclick="openUserChat()">💬 Chat with User</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Chat Modal -->
    <div class="modal-overlay" id="chatModal">
        <div class="modal-content">
            <div class="chat-header">
                <h3 id="chatUserName">Chat with User</h3>
                <button class="close-btn" onclick="closeChatModal()">&times;</button>
            </div>
            <div class="chat-messages" id="chatMessages">
                <!-- Chat messages will appear here -->
            </div>
            <div class="message-input">
                <input type="text" id="messageInput" placeholder="Type your message..." onkeypress="handleMessageKeyPress(event)">
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/script.js"></script>
    <script>
        // Sample user data
        let users = [
            {
                id: 1,
                name: 'John Doe',
                email: 'john.doe@email.com',
                joinDate: '2024-01-15',
                status: 'confirmed',
                accountType: 'gold',
                walletBalance: 5000,
                invested: 10000,
                withdrawal: 2000,
                referralBonus: 500
            },
            {
                id: 2,
                name: 'Jane Smith',
                email: 'jane.smith@email.com',
                joinDate: '2024-02-20',
                status: 'pending',
                accountType: 'none',
                walletBalance: 0,
                invested: 0,
                withdrawal: 0,
                referralBonus: 0
            },
            {
                id: 3,
                name: 'Mike Johnson',
                email: 'mike.johnson@email.com',
                joinDate: '2024-01-10',
                status: 'confirmed',
                accountType: 'silver',
                walletBalance: 3000,
                invested: 7500,
                withdrawal: 1000,
                referralBonus: 300
            }
        ];

        let selectedUser = null;
        let chatHistory = {};

        // Initialize the admin dashboard
        document.addEventListener('DOMContentLoaded', function() {
            loadUsers();
            setupSearchFunctionality();
        });

        // Load users into the grid
        function loadUsers() {
            const usersGrid = document.getElementById('usersGrid');
            usersGrid.innerHTML = '';

            users.forEach(user => {
                const userCard = document.createElement('div');
                userCard.className = 'user-card';
                userCard.onclick = () => selectUser(user);

                userCard.innerHTML = `
                    <div class="user-info">
                        <h4>${user.name}</h4>
                        <p>${user.email}</p>
                        <p>Joined: ${formatDate(user.joinDate)}</p>
                    </div>
                    <div class="user-status status-${user.status}">${user.status}</div>
                `;

                usersGrid.appendChild(userCard);
            });
        }

        // Select a user and show their details
        function selectUser(user) {
            selectedUser = user;
            
            // Update UI to show selected user
            document.querySelectorAll('.user-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');

            // Show user details
            document.getElementById('noUserSelected').style.display = 'none';
            document.getElementById('userDetailsContent').style.display = 'block';

            // Populate form fields
            document.getElementById('userName').value = user.name;
            document.getElementById('userEmail').value = user.email;
            document.getElementById('userJoinDate').value = formatDate(user.joinDate);
            document.getElementById('userStatus').value = user.status;
            document.getElementById('userAccountType').value = user.accountType;
            document.getElementById('userWalletBalance').value = user.walletBalance;
            document.getElementById('userInvested').value = user.invested;
            document.getElementById('userWithdrawal').value = user.withdrawal;
            document.getElementById('userReferralBonus').value = user.referralBonus;
        }

        // Save user changes
        function saveUserChanges() {
            if (!selectedUser) return;

            const userIndex = users.findIndex(u => u.id === selectedUser.id);
            if (userIndex === -1) return;

            // Update user data
            users[userIndex].status = document.getElementById('userStatus').value;
            users[userIndex].accountType = document.getElementById('userAccountType').value;
            users[userIndex].walletBalance = parseFloat(document.getElementById('userWalletBalance').value) || 0;
            users[userIndex].invested = parseFloat(document.getElementById('userInvested').value) || 0;
            users[userIndex].withdrawal = parseFloat(document.getElementById('userWithdrawal').value) || 0;
            users[userIndex].referralBonus = parseFloat(document.getElementById('userReferralBonus').value) || 0;

            // Update selectedUser reference
            selectedUser = users[userIndex];

            // Reload users grid to reflect changes
            loadUsers();
            
            // Show success message
            showToast('User details updated successfully!', 'success');
        }

        // Reset user form
        function resetUserForm() {
            if (!selectedUser) return;
            selectUser(selectedUser);
        }

        // Search functionality
        function setupSearchFunctionality() {
            const searchInput = document.getElementById('searchUsers');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const filteredUsers = users.filter(user => 
                    user.name.toLowerCase().includes(searchTerm) || 
                    user.email.toLowerCase().includes(searchTerm)
                );
                
                const usersGrid = document.getElementById('usersGrid');
                usersGrid.innerHTML = '';

                filteredUsers.forEach(user => {
                    const userCard = document.createElement('div');
                    userCard.className = 'user-card';
                    if (selectedUser && selectedUser.id === user.id) {
                        userCard.classList.add('selected');
                    }
                    userCard.onclick = () => selectUser(user);

                    userCard.innerHTML = `
                        <div class="user-info">
                            <h4>${user.name}</h4>
                            <p>${user.email}</p>
                            <p>Joined: ${formatDate(user.joinDate)}</p>
                        </div>
                        <div class="user-status status-${user.status}">${user.status}</div>
                    `;

                    usersGrid.appendChild(userCard);
                });
            });
        }

        // Create new admin
        function createAdmin() {
            const email = document.getElementById('newAdminEmail').value;
            const password = document.getElementById('newAdminPassword').value;

            if (!email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }

            // Simulate admin creation
            showToast('Admin created successfully!', 'success');
            document.getElementById('newAdminEmail').value = '';
            document.getElementById('newAdminPassword').value = '';
        }

        // Chat functionality
        function openUserChat() {
            if (!selectedUser) return;

            document.getElementById('chatUserName').textContent = `Chat with ${selectedUser.name}`;
            document.getElementById('chatModal').style.display = 'flex';
            
            // Load chat history
            loadChatHistory(selectedUser.id);
        }

        function closeChatModal() {
            document.getElementById('chatModal').style.display = 'none';
        }

        function loadChatHistory(userId) {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';

            if (!chatHistory[userId]) {
                chatHistory[userId] = [
                    { sender: 'user', message: 'Hello, I need help with my account', time: new Date() },
                    { sender: 'admin', message: 'Hi! I\'m here to help. What can I assist you with?', time: new Date() }
                ];
            }

            chatHistory[userId].forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${msg.sender}`;
                messageDiv.innerHTML = `
                    <div>${msg.message}</div>
                    <small style="opacity: 0.7; font-size: 11px;">${formatTime(msg.time)}</small>
                `;
                chatMessages.appendChild(messageDiv);
            });

            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();

            if (!message || !selectedUser) return;

            if (!chatHistory[selectedUser.id]) {
                chatHistory[selectedUser.id] = [];
            }

            // Add admin message
            chatHistory[selectedUser.id].push({
                sender: 'admin',
                message: message,
                time: new Date()
            });

            messageInput.value = '';
            loadChatHistory(selectedUser.id);

            // Simulate user response after 2 seconds
            setTimeout(() => {
                const responses = [
                    'Thank you for your help!',
                    'I understand, thank you.',
                    'That makes sense.',
                    'Okay, I\'ll try that.',
                    'Thanks for the quick response!'
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                chatHistory[selectedUser.id].push({
                    sender: 'user',
                    message: randomResponse,
                    time: new Date()
                });
                loadChatHistory(selectedUser.id);
            }, 2000);
        }

        function handleMessageKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Utility functions
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        function formatTime(date) {
            return date.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = '../index.html';
            }
        }

        // Toast notification function
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 6px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
            `;
            
            const colors = {
                success: '#4CAF50',
                error: '#f44336',
                warning: '#FF9800',
                info: '#2196F3'
            };
            toast.style.backgroundColor = colors[type] || colors.info;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '1';
                toast.style.transform = 'translateX(0)';
            }, 10);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
